<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
	<constant name="struts.devMode" value="true" />
	<!-- 指定默认编码集 -->
	<constant name="struts.i18n.encoding" value="UTF-8"></constant>
	<constant name="struts.enable.DynamicMethodInvocation" value="true"></constant>

	<package name="struts2" extends="struts-default" namespace="/">
		<action name="user_*" class="com.linestore.action.UserAction"
			method="{1}">
			<result name="success" type="redirect">admin/index.jsp</result>
			<result name="error">admin/login.jsp</result>
		</action>
		
		<action name="business_*" class="com.linestore.action.BusinessAction" method="{1}">
			<result name="gotoCustomer">home/customer.jsp</result>
			<result name="success" type="redirectAction">business_jump</result>
        	<result name="selectAll">admin/business.jsp</result>
        	<result name="error">admin/index.jsp</result>
        </action>

<<<<<<< HEAD
	
=======
		<action name="CusAddress_*" class="com.linestore.action.CusAddressAction"
			method="{1}">
			<result name="success" type="redirect">home/deliveryAddress.jsp</result>
			<result name="cusAddressList" type="redirect">home/deliveryAddress.jsp</result>
			<result name="cusAddressAdd">home/deliveryAddressAdd.jsp</result>
			<result name="cusAddressEdit">home/deliveryAddressEdit.jsp</result>
			<result name="error">admin/login.jsp</result>
			<result name="selectAll" >home/deliveryAddress.jsp</result>
			<result name="add" type="redirect">home/deliveryAddressAdd.jsp</result>
			<result name="edit" >home/deliveryAddressEdit.jsp</result>
			
		</action>
>>>>>>> pr/21
		
		<action name="Friends_*" class="com.linestore.action.FriendsAction"
			method="{1}">
			<result name="success" type="redirect">index.jsp</result>
			<result name="selectAll" >home/myFriendO.jsp</result>
			<result name="selectType" >index.jsp</result>
			<result name="error" >admin/login.jsp</result>
		</action>
		<action name="Order_*" class="com.linestore.action.OrderAction"
			method="{1}">
			<result name="success" >index.jsp</result>
			<result name="selectAll" >home/myOrder.jsp</result>
			<result name="selectType" >home/myOrder.jsp</result>
			<result name="error" >admin/login.jsp</result>
		</action>
		<action name="Customer" class="com.linestore.action.CustomerAction">
			<result name="gotoRegister">/home/register.jsp</result>
			<result name="gotoLogin">/home/login.jsp</result>
			<result name="gotoCustomer" type="redirect">/home/customer.jsp</result>
			<result name="gotoCusMessage">/home/cusMessage.jsp</result>
			<result name="gotoForgetTwo">/home/forgetPasswordTwo.jsp</result>

			
			<result name="askRegister">/home/share.jsp</result>

			<result name="myQRCode" >home/myQRCode.jsp</result>

			<result name="logout">/home/login.jsp</result>
		</action>
		<action name="CusCoupon" class="com.linestore.action.CusCouponAction">
			<result name="gotoCoupon">/home/coupon.jsp</result>
			<result name="gotoLogin">/home/login.jsp</result>
		</action>
		<!-- 微信入口配置 -->
		<action name="WxIndex_*" class="com.linestore.action.WxIndexAction"
			method="{1}">
		</action>
		
		<action name="Message_*" class="com.linestore.action.MessageAction"
			method="{1}">
			<result name="selectAll">home/leaveWord.jsp</result>
			<result name="goto" type="redirectAction">Message_selectAll</result>
			<result name="messageList">home/leaveWord.jsp</result>
			<result name="error">admin/login.jsp</result>
		</action>
		
		<action name="CusAccount" class="com.linestore.action.CusAccountAction">
			<result name="gotoChangeOne">home/changeOne.jsp</result>
			<result name="gotoPointsOne">home/pointsOne.jsp</result>
		</action>
		
		<action name="Tag" class="com.linestore.action.TagAction">
			<result name="gotoCusLabel">/home/cusLabel.jsp</result>
		</action>
		
		<action name="CusBank" class="com.linestore.action.CusBankAction">
			<result name="gotoBindCardOne" type="redirect">/home/bindCardOne.jsp</result>
		</action>
		
		<action name="Catetory" class="com.linestore.action.CatetoryAction">
			<result name="gotoApply">/home/applyAdmission.jsp</result>
		</action>
	</package>

	<package name="strutsJson" extends="json-default">
		<action name="CustomerJson" class="com.linestore.action.CustomerAction"
			method="sendMessage">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
		<action name="BindPhoneJson" class="com.linestore.action.CustomerAction"
			method="BindPhone">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
		<action name="ForgetPassJson" class="com.linestore.action.CustomerAction"
			method="forgetPass">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
		
		<action name="querySmallJson" class="com.linestore.action.CatetoryAction"
			method="querySmall">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>


		<!-- 微信相关配置 -->
		<action name="WxJsApi" class="com.linestore.action.WxJsApiAction"
			method="JsApiParams">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
		<action name="WxOauthRedirect" class="com.linestore.action.WxOauthRedirectActioin"
			method="WeXinLogin">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
	</package>
<<<<<<< HEAD
	<!--受权限控制的Action请求配置 -->
	<package name="authority" extends="struts-default">
		<interceptors>
			<!--定义一个名为authority的拦截器 -->
			<interceptor class="com.linestore.inteceptor.AuthorizedInterceptor"
				name="authority">
				<param name="userDao"></param>
			</interceptor>
			<!--定义一个包含权限检查的拦截器栈 -->
			<interceptor-stack name="mydefault">
				<!--配置内建默认拦截器 -->
				<interceptor-ref name="defaultStack" />
				<!--配置自定义的拦截器 -->
				<interceptor-ref name="authority" />
			</interceptor-stack>
		</interceptors>

		<default-interceptor-ref name="mydefault" />
		<!--定义全局Result -->
		<global-results>
			<result name="LoginFail">admin/login.jsp</result>
			<result name="GoFail">admin/index.jsp</result>
		</global-results>
		<!-- 下边是被拦截的action，先把收货地址拿来测试，经测试收货地址被拦截，其他action未被拦截 -->
		<action name="CusAddress_*" class="com.linestore.action.CusAddressAction"
			method="{1}">
			<result name="success" type="redirect">home/deliveryAddress.jsp</result>
			<result name="cusAddressList" type="redirect">home/deliveryAddress.jsp</result>
			<result name="cusAddressAdd">home/deliveryAddressAdd.jsp</result>
			<result name="cusAddressEdit">home/deliveryAddressEdit.jsp</result>
			<result name="error">admin/login.jsp</result>
			<result name="selectAll" >home/deliveryAddress.jsp</result>
			<result name="add" type="redirect">home/deliveryAddressAdd.jsp</result>
			<result name="edit" >home/deliveryAddressEdit.jsp</result>
		</action>
	</package>
=======
	
	<package name="struts3" extends="struts-default" namespace="/admin">
		<action name="business_*" class="com.linestore.action.BusinessAction" method="{1}">
        	<result name="selectAll">business.jsp</result>
        	<result name="read">readBusiness.jsp</result>
        	<result name="edit">editBusiness.jsp</result>
        	<result name="error">index.jsp</result>
        </action>
    </package>
>>>>>>> pr/21
</struts>
