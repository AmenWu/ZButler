<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
	<constant name="struts.devMode" value="true" />
	<!-- 指定默认编码集 -->
	<constant name="struts.i18n.encoding" value="UTF-8"></constant>
	<constant name="struts.enable.DynamicMethodInvocation" value="true"></constant>

	<package name="struts2" extends="struts-default" namespace="/">
		<action name="user_*" class="com.linestore.action.UserAction"
			method="{1}">
			<result name="success" type="redirect">admin/index.jsp</result>
			<result name="error">admin/login.jsp</result>
		</action>

		<action name="CusAddress_*" class="com.linestore.action.CusAddressAction"
			method="{1}">
			<result name="success" type="redirect">home/deliveryAddress.jsp</result>
			<result name="cusAddressList">home/deliveryAddress.jsp</result>
			<result name="cusAddressAdd">home/deliveryAddressAdd.jsp</result>
			<result name="cusAddressEdit">home/deliveryAddressEdit.jsp</result>
			<result name="error">admin/login.jsp</result>
		</action>
		<action name="CustomerWeChat" class="com.linestore.action.CustomerAction" method="weChat">
			<result name="gotoCustomer" type="redirect">/home/customer.jsp</result>
		</action>
		<action name="Customer" class="com.linestore.action.CustomerAction">
			<result name="gotoRegister">/home/register.jsp</result>
			<result name="gotoLogin">/home/login.jsp</result>
			<result name="gotoCustomer" type="redirect">/home/customer.jsp</result>
			<result name="gotoCusMessage">/home/cusMessage.jsp</result>
			<result name="gotoForgetTwo">/home/forgetPasswordTwo.jsp</result>
			<result name="logout">/home/login.jsp</result>
		</action>
		<action name="CusCoupon" class="com.linestore.action.CusCouponAction">
			<result name="gotoCoupon">/home/coupon.jsp</result>
			<result name="gotoLogin">/home/login.jsp</result>
		</action>
		<!-- 微信入口配置 -->
		<action name="WxIndex_*" class="com.linestore.action.WxIndexAction"
			method="{1}">
		</action>
		
		<action name="WxOauthRedirect" class="com.linestore.action.WxOauthRedirectActioin">
			<result name="gotoWeChat" type="redirectAction">CustomerWeChat</result>
		</action>
		
	</package>

	<package name="strutsJson" extends="json-default">
		<action name="CustomerJson" class="com.linestore.action.CustomerAction"
			method="sendMessage">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
		<action name="BindPhoneJson" class="com.linestore.action.CustomerAction"
			method="BindPhone">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
		<action name="ForgetPassJson" class="com.linestore.action.CustomerAction"
			method="forgetPass">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>

		<action name="Message_*" class="com.linestore.action.MessageAction"
			method="{1}">
			<result name="success">home/leaveWord.jsp</result>
			<result name="messageList">home/leaveWord.jsp</result>
			<result name="error">admin/login.jsp</result>
		</action>
		<action name="Customer_*" class="com.linestore.action.CustomerAction"
			method="{1}">
			<result name="success">index.jsp</result>
			<result name="customerResult">home/myQRCode.jsp</result>
			<result name="error">admin/login.jsp</result>
		</action>
		
		<!-- 微信相关配置 -->
		<action name="WxJsApi" class="com.linestore.action.WxJsApiAction"
			method="JsApiParams">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
		<action name="WxOauthRedirect" class="com.linestore.action.WxOauthRedirectActioin"
			method="WeXinLogin">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
	</package>
</struts>
